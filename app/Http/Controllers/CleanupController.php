<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Product;
use App\DeviceRecord;
use App\ProductionSectionTemplate;
use App\ProductTemplate;
use GuzzleHttp\Client;
use GuzzleHttp\Exception\ClientException;
use GuzzleHttp\Exception\RequestException;
use GuzzleHttp\Psr7;



define('PC_SERVICE_BASE_URL', 'http://127.0.0.1:8087/api/');

class CleanupController extends Controller
{
    public function index(Request $request)
    {
        echo '<pre>';
        echo 'DB cleanup Tasks</br>';
        die('no execution');

        // Cleanup

        $serial = [
            "20511"=>["10000830A3"=>"642000020511010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000450"],
            "20691"=>["10000830A3"=>"642000020691010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000666"],
            "20695"=>["10000830A3"=>"642000020695010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000367"],
            "20696"=>["10000830A3"=>"642000020696010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000213"],
            "20697"=>["10000830A3"=>"642000020697010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000222"],
            "20698"=>["10000830A3"=>"642000020698010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000418"],
            "20700"=>["10000830A3"=>"642000020700010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000385"],
            "20701"=>["10000830A3"=>"642000020701010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000354"],
            "20703"=>["10000830A3"=>"642000020703010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000350"],
            "20704"=>["10000830A3"=>"642000020704010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000417"],
            "20707"=>["10000830A3"=>"642000020707010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000419"],
            "20708"=>["10000830A3"=>"642000020708010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000346"],
            "20709"=>["10000830A3"=>"642000020709010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000347"],
            "20710"=>["10000830A3"=>"642000020710010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000413"],
            "20711"=>["10000830A3"=>"642000020711010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000421"],
            "20712"=>["10000830A3"=>"642000020712010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000207"],
            "20713"=>["10000830A3"=>"642000020713010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000408"],
            "20714"=>["10000830A3"=>"642000020714010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000220"],
            "20715"=>["10000830A3"=>"642000020715010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000411"],
            "20717"=>["10000830A3"=>"642000020717010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000041"],
            "20718"=>["10000830A3"=>"642000020718010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000524"],
            "20719"=>["10000830A3"=>"642000020719010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000522"],
            "20721"=>["10000830A3"=>"642000020721010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000125"],
            "20722"=>["10000830A3"=>"642000020722010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000122"],
            "20723"=>["10000830A3"=>"642000020723010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000465"],
            "20724"=>["10000830A3"=>"642000020724010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000200"],
            "20725"=>["10000830A3"=>"642000020725010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000180"],
            "20726"=>["10000830A3"=>"642000020726010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000225"],
            "20727"=>["10000830A3"=>"642000020727010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000025"],
            "20728"=>["10000830A3"=>"642000020728010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000320"],
            "20729"=>["10000830A3"=>"642000020729010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000044"],
            "20730"=>["10000830A3"=>"642000020730010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000292"],
            "20731"=>["10000830A3"=>"642000020731010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000278"],
            "20733"=>["10000830A3"=>"642000020733010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000704"],
            "20734"=>["10000830A3"=>"642000020734010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000663"],
            "20735"=>["10000830A3"=>"642000020735010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000014"],
            "20736"=>["10000830A3"=>"642000020736010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000329"],
            "20737"=>["10000830A3"=>"642000020737010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000694"],
            "20738"=>["10000830A3"=>"642000020738010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000456"],
            "20739"=>["10000830A3"=>"642000020739010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000281"],
            "20740"=>["10000830A3"=>"642000020740010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000056"],
            "20742"=>["10000830A3"=>"642000020742010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000176"],
            "20743"=>["10000830A3"=>"642000020743010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000021"],
            "20744"=>["10000830A3"=>"642000020744010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000330"],
            "20745"=>["10000830A3"=>"642000020745010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000556"],
            "20746"=>["10000830A3"=>"642000020746010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000123"],
            "20747"=>["10000830A3"=>"642000020747010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000471"],
            "20748"=>["10000830A3"=>"642000020748010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000192"],
            "20749"=>["10000830A3"=>"642000020749010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000027"],
            "20750"=>["10000830A3"=>"642000020750010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000119"],
            "20751"=>["10000830A3"=>"642000020751010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000326"],
            "20752"=>["10000830A3"=>"642000020752010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000558"],
            "20753"=>["10000830A3"=>"642000020753010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000030"],
            "20754"=>["10000830A3"=>"642000020754010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000673"],
            "20755"=>["10000830A3"=>"642000020755010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000270"],
            "20757"=>["10000830A3"=>"642000020757010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000325"],
            "20758"=>["10000830A3"=>"642000020758010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000559"],
            "20759"=>["10000830A3"=>"642000020759010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000323"],
            "20760"=>["10000830A3"=>"642000020760010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000309"],
            "20761"=>["10000830A3"=>"642000020761010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000203"],
            "20763"=>["10000830A3"=>"642000020763010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000072"],
            "20764"=>["10000830A3"=>"642000020764010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000368"],
            "20765"=>["10000830A3"=>"642000020765010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000469"],
            "20766"=>["10000830A3"=>"642000020766010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000080"],
            "20767"=>["10000830A3"=>"642000020767010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000068"],
            "20768"=>["10000830A3"=>"642000020768010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000209"],
            "20769"=>["10000830A3"=>"642000020769010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000069"],
            "20770"=>["10000830A3"=>"642000020770010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000922"],
            "20771"=>["10000830A3"=>"642000020771010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000479"],
            "20772"=>["10000830A3"=>"642000020772010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000918"],
            "20774"=>["10000830A3"=>"642000020774010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000458"],
            "20776"=>["10000830A3"=>"642000020776010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000023"],
            "20777"=>["10000830A3"=>"642000020777010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000462"],
            "20778"=>["10000830A3"=>"642000020778010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000659"],
            "20779"=>["10000830A3"=>"642000020779010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000229"],
            "20780"=>["10000830A3"=>"642000020780010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000497"],
            "20782"=>["10000830A3"=>"642000020782010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000632"],
            "20783"=>["10000830A3"=>"642000020783010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000665"],
            "20785"=>["10000830A3"=>"642000020785010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000460"],
            "20786"=>["10000830A3"=>"642000020786010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000664"],
            "20787"=>["10000830A3"=>"642000020787010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000472"],
            "20788"=>["10000830A3"=>"642000020788010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000454"],
            "20789"=>["10000830A3"=>"642000020789010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000184"],
            "20790"=>["10000830A3"=>"642000020790010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000406"],
            "20792"=>["10000830A3"=>"642000020792010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000054"],
            "20793"=>["10000830A3"=>"642000020793010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000182"],
            "20795"=>["10000830A3"=>"642000020795010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000130"],
            "20796"=>["10000830A3"=>"642000020796010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000304"],
            "20797"=>["10000830A3"=>"642000020797010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000081"],
            "20798"=>["10000830A3"=>"642000020798010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000217"],
            "20799"=>["10000830A3"=>"642000020799010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000015"],
            "20800"=>["10000830A3"=>"642000020800010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000143"],
            "20801"=>["10000830A3"=>"642000020801010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000423"],
            "20802"=>["10000830A3"=>"642000020802010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000495"],
            "20804"=>["10000830A3"=>"642000020804010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000183"],
            "20806"=>["10000830A3"=>"642000020806010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000420"],
            "20808"=>["10000830A3"=>"642000020808010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000117"],
            "20809"=>["10000830A3"=>"642000020809010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000223"],
            "20811"=>["10000830A3"=>"642000020811010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000269"],
            "20812"=>["10000830A3"=>"642000020812010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000019"],
            "20813"=>["10000830A3"=>"642000020813010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000410"],
            "20814"=>["10000830A3"=>"642000020814010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000008"],
            "20815"=>["10000830A3"=>"642000020815010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000134"],
            "20816"=>["10000830A3"=>"642000020816010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000168"],
            "20817"=>["10000830A3"=>"642000020817010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000079"],
            "20818"=>["10000830A3"=>"642000020818010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000129"],
            "20819"=>["10000830A3"=>"642000020819010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000457"],
            "20822"=>["10000830A3"=>"642000020822010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000498"],
            "20823"=>["10000830A3"=>"642000020823010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000007"],
            "20824"=>["10000830A3"=>"642000020824010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000543"],
            "20825"=>["10000830A3"=>"642000020825010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000194"],
            "20826"=>["10000830A3"=>"642000020826010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000228"],
            "20827"=>["10000830A3"=>"642000020827010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000236"],
            "20828"=>["10000830A3"=>"642000020828010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000140"],
            "20829"=>["10000830A3"=>"642000020829010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000185"],
            "20830"=>["10000830A3"=>"642000020830010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000171"],
            "20831"=>["10000830A3"=>"642000020831010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000060"],
            "20832"=>["10000830A3"=>"642000020832010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000127"],
            "20834"=>["10000830A3"=>"642000020834010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000219"],
            "20836"=>["10000830A3"=>"642000020836010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000212"],
            "20837"=>["10000830A3"=>"642000020837010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000139"],
            "20838"=>["10000830A3"=>"642000020838010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000331"],
            "20840"=>["10000830A3"=>"642000020840010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000167"],
            "20841"=>["10000830A3"=>"642000020841010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000138"],
            "20842"=>["10000830A3"=>"642000020842010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000013"],
            "20843"=>["10000830A3"=>"642000020843010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000187"],
            "20844"=>["10000830A3"=>"642000020844010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000191"],
            "20845"=>["10000830A3"=>"642000020845010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000120"],
            "20846"=>["10000830A3"=>"642000020846010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000131"],
            "20847"=>["10000830A3"=>"642000020847010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000343"],
            "20848"=>["10000830A3"=>"642000020848010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000136"],
            "20849"=>["10000830A3"=>"642000020849010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000631"],
            "20851"=>["10000830A3"=>"642000020851010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000160"],
            "20852"=>["10000830A3"=>"642000020852010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000205"],
            "20853"=>["10000830A3"=>"642000020853010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000226"],
            "20854"=>["10000830A3"=>"642000020854010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000067"],
            "20855"=>["10000830A3"=>"642000020855010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000164"],
            "20856"=>["10000830A3"=>"642000020856010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000076"],
            "20857"=>["10000830A3"=>"642000020857010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000083"],
            "20858"=>["10000830A3"=>"642000020858010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000073"],
            "20860"=>["10000830A3"=>"642000020860010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000154"],
            "20861"=>["10000830A3"=>"642000020861010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000137"],
            "20862"=>["10000830A3"=>"642000020862010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000327"],
            "20863"=>["10000830A3"=>"642000020863010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000012"],
            "20864"=>["10000830A3"=>"642000020864010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000351"],
            "20865"=>["10000830A3"=>"642000020865010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000084"],
            "20866"=>["10000830A3"=>"642000020866010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000181"],
            "20868"=>["10000830A3"=>"642000020868010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000211"],
            "20869"=>["10000830A3"=>"642000020869010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000216"],
            "20870"=>["10000830A3"=>"642000020870010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000135"],
            "20871"=>["10000830A3"=>"642000020871010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000142"],
            "20872"=>["10000830A3"=>"642000020872010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000121"],
            "20874"=>["10000830A3"=>"642000020874010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000316"],
            "20876"=>["10000830A3"=>"642000020876010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000159"],
            "20877"=>["10000830A3"=>"642000020877010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000227"],
            "20878"=>["10000830A3"=>"642000020878010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000009"],
            "20879"=>["10000830A3"=>"642000020879010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000078"],
            "20880"=>["10000830A3"=>"642000020880010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000062"],
            "20881"=>["10000830A3"=>"642000020881010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000128"],
            "20882"=>["10000830A3"=>"642000020882010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000172"],
            "20883"=>["10000830A3"=>"642000020883010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000230"],
            "20884"=>["10000830A3"=>"642000020884010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000169"],
            "20885"=>["10000830A3"=>"642000020885010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000215"],
            "20886"=>["10000830A3"=>"642000020886010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000038"],
            "20887"=>["10000830A3"=>"642000020887010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000162"],
            "20889"=>["10000830A3"=>"642000020889010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000199"],
            "20890"=>["10000830A3"=>"642000020890010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000034"],
            "20891"=>["10000830A3"=>"642000020891010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000074"],
            "20892"=>["10000830A3"=>"642000020892010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000075"],
            "20893"=>["10000830A3"=>"642000020893010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000404"],
            "20894"=>["10000830A3"=>"642000020894010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000195"],
            "20896"=>["10000830A3"=>"642000020896010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000141"],
            "20897"=>["10000830A3"=>"642000020897010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000177"],
            "20898"=>["10000830A3"=>"642000020898010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000063"],
            "20693"=>["10000830A3"=>"642000020693010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000656"],
            "20699"=>["10000830A3"=>"642000020699010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000355"],
            "20702"=>["10000830A3"=>"642000020702010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000660"],
            "20705"=>["10000830A3"=>"642000020705010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000402"],
            "20706"=>["10000830A3"=>"642000020706010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000434"],
            "20716"=>["10000830A3"=>"642000020716010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000557"],
            "20720"=>["10000830A3"=>"642000020720010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000257"],
            "20756"=>["10000830A3"=>"642000020756010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000430"],
            "20762"=>["10000830A3"=>"642000020762010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000527"],
            "20781"=>["10000830A3"=>"642000020781010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000499"],
            "20784"=>["10000830A3"=>"642000020784010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000496"],
            "20805"=>["10000830A3"=>"642000020805010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000126"],
            "20807"=>["10000830A3"=>"642000020807010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000151"],
            "20810"=>["10000830A3"=>"642000020810010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000344"],
            "20821"=>["10000830A3"=>"642000020821010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000022"],
            "20835"=>["10000830A3"=>"642000020835010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000065"],
            "20833"=>["10000830A3"=>"642000020833010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000010"],
            "20839"=>["10000830A3"=>"642000020839010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000233"],
            "20850"=>["10000830A3"=>"642000020850010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000204"],
            "20859"=>["10000830A3"=>"642000020859010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000070"],
            "20867"=>["10000830A3"=>"642000020867010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000133"],
            "20875"=>["10000830A3"=>"642000020875010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000144"],
            "20873"=>["10000830A3"=>"642000020873010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000201"],
            "20888"=>["10000830A3"=>"642000020888010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000403"],
            "20895"=>["10000830A3"=>"642000020895010000000000", "10000828A3"=>"GPM1866A0#20200911#T#000416"],

        ];


        $baseUrl = PC_SERVICE_BASE_URL;
        $client = new Client();


        $count = 0;
        // fetch product ID
        foreach($serial as $key=>$value){
            // this will take a while, but should be done within one minute per call
            set_time_limit(60);
            $id = null;
            $original_serial = null;
            /*
            642000020891010000000000
                   20891
            642000020891010104019920
            */
            //$qry = $baseUrl.'products/'.'6420000'.$key.'010104019920'.'?article_nr=80000081C1';
            $qry = $baseUrl.'products/'.$key.'?article_nr=80000081C1';
            $responseData = null;
            echo $qry.' => ';
            //$response = Http::withOptions(['http_errors'=> false, 'timeout'=>4])->get($qry);

            $response = $client->request('GET', $qry, ['http_errors'=> false, 'timeout'=>4, 'headers'=>['Accept'=> 'application/json']]);   // call API, disable exception
            echo $response->getStatusCode();
            if( $response->getStatusCode() == 200 ){
                $responseData = json_decode((string)$response->getBody(), false);
                echo ' id: '.$responseData->data->id;
                $id = $responseData->data->id;
                $original_serial = $responseData->data->st_serial_nr;

                $qry = $baseUrl.'products/'.$id.'/components';
                // update backlight
                $response = $client->request('POST', $qry, ['http_errors'=> false, 'timeout'=>4, 'headers'=>['Content-Type'=> 'application/json'],
                'json'=>[
                    'st_article_nr'=>'10000830A3',
                    'serial_nr'=> $value['10000830A3'],
                    'created_by'=>'8bb937d6-a38a-4ffa-adeb-fbc1173d0415'
                ]]);   // call API, disable exception
                if( $response->getStatusCode() == 200 ){
                    echo ' 1ok ';
                }else{
                    echo ' '.$response->getStatusCode().' '.$response->getBody().' ';
                }

                // update fog
                $response = $client->request('POST', $qry, ['http_errors'=> false, 'timeout'=>4, 'headers'=>['Content-Type'=> 'application/json'],
                'json'=>[
                    'st_article_nr'=>'10000828A3',
                    'serial_nr'=> $value['10000828A3'],
                    'created_by'=>'8bb937d6-a38a-4ffa-adeb-fbc1173d0415'
                ]]);   // call API, disable exception
                if( $response->getStatusCode() == 200 ){
                    echo ' 2ok ';
                }else{
                    echo ' '.$response->getStatusCode().' '.$response->getBody().' ';
                }

                /*
                done
                // rework semsotec serial
                $qry = $baseUrl.'products/'.$id;
                echo ' '.$qry.' '.$key;
                $response = $client->request('PUT', $qry, ['http_errors'=> false, 'timeout'=>4, 'headers'=>['Content-Type'=> 'application/json'],
                'json'=>[
                    'st_serial_nr'=> "$key",
                    'updated_by'=>'8bb937d6-a38a-4ffa-adeb-fbc1173d0415'
                ]]);   // call API, disable exception
                if( $response->getStatusCode() == 200 ){
                    echo ' 3ok ';
                }
                */

            }
            echo '<br/>';

            ob_flush();
//            usleep (10000);
//            if( ++$count > 0 ) break;
        }

/*
        $response = $client->request('GET', $baseUrl.'product_templates?article_nr='.$id, ['http_errors'=> false]);   // call API, disable exception
        $statusCode = $response->getStatusCode();
        $productionInfo = new \stdClass();
        if( $statusCode == 200 ){
          print_r($serial);
*/


    }

}
